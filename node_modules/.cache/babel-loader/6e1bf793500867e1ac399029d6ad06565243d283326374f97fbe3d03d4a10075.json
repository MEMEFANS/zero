{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\Administrator\\\\CascadeProjects\\\\AIMiner\\\\src\\\\pages\\\\NFTMarket.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { injected } from '../utils/connectors';\nimport { ethers } from 'ethers';\nimport { useNavigate } from 'react-router-dom';\n\n// 合约地址和ABI\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MYSTERY_BOX_ADDRESS = \"YOUR_MYSTERY_BOX_CONTRACT_ADDRESS\";\nconst ZONE_TOKEN_ADDRESS = \"YOUR_ZONE_TOKEN_ADDRESS\";\nconst MYSTERY_BOX_ABI = [\"function getMarketListing(uint256 tokenId) external view returns (tuple(address seller, uint256 price, bool isActive))\", \"function getNFTAttributes(uint256 tokenId) external view returns (tuple(uint8 rarity, uint256 power, uint256 dailyReward, uint256 maxReward, uint256 minedAmount, bool isStaked, uint256 stakeTime))\", \"function getOwnedNFTs(address user) external view returns (uint256[])\", \"function listNFT(uint256 tokenId, uint256 price) external\", \"function unlistNFT(uint256 tokenId) external\", \"function buyNFT(uint256 tokenId) external payable\", \"function stakeNFT(uint256 tokenId) external\", \"function approve(address to, uint256 tokenId) external\", \"function isApprovedForAll(address owner, address operator) external view returns (bool)\", \"function setApprovalForAll(address operator, bool approved) external\"];\nconst ZONE_TOKEN_ABI = [\"function balanceOf(address account) external view returns (uint256)\", \"function allowance(address owner, address spender) external view returns (uint256)\", \"function approve(address spender, uint256 amount) external returns (bool)\"];\nconst NFT_RARITY = ['N', 'R', 'SR', 'SSR'];\nconst NFTMarket = () => {\n  _s();\n  const {\n    active,\n    account,\n    activate,\n    library\n  } = useWeb3React();\n  const navigate = useNavigate();\n  const [marketItems, setMarketItems] = useState([]);\n  const [myNFTs, setMyNFTs] = useState([]);\n  const [selectedTab, setSelectedTab] = useState('market');\n  const [isLoading, setIsLoading] = useState(true);\n  const connectWallet = async () => {\n    try {\n      await activate(injected);\n    } catch (error) {\n      console.error('Error connecting wallet:', error);\n    }\n  };\n  const loadMarketData = async () => {\n    try {\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n\n      // 加载我的NFT\n      const myTokenIds = await contract.getOwnedNFTs(account);\n      const myNFTsData = await Promise.all(myTokenIds.map(async tokenId => {\n        const attributes = await contract.getNFTAttributes(tokenId);\n        const listing = await contract.getMarketListing(tokenId);\n\n        // 如果已质押，跳过\n        if (attributes.isStaked) return null;\n        return {\n          id: tokenId.toString(),\n          type: NFT_RARITY[attributes.rarity],\n          power: attributes.power.toString(),\n          dailyReward: ethers.utils.formatEther(attributes.dailyReward),\n          maxReward: ethers.utils.formatEther(attributes.maxReward),\n          listed: listing.isActive,\n          price: listing.isActive ? ethers.utils.formatEther(listing.price) : null\n        };\n      }));\n      setMyNFTs(myNFTsData.filter(nft => nft !== null));\n\n      // 加载市场列表\n      // 这里需要一个获取所有市场挂单的方法，暂时使用模拟数据\n      const marketListings = []; // 这里应该从合约获取所有活跃的挂单\n      const marketItemsData = await Promise.all(marketListings.map(async tokenId => {\n        const attributes = await contract.getNFTAttributes(tokenId);\n        const listing = await contract.getMarketListing(tokenId);\n        return {\n          id: tokenId.toString(),\n          type: NFT_RARITY[attributes.rarity],\n          power: attributes.power.toString(),\n          dailyReward: ethers.utils.formatEther(attributes.dailyReward),\n          maxReward: ethers.utils.formatEther(attributes.maxReward),\n          price: ethers.utils.formatEther(listing.price),\n          seller: listing.seller\n        };\n      }));\n      setMarketItems(marketItemsData);\n      setIsLoading(false);\n    } catch (error) {\n      console.error('Error loading market data:', error);\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (active) {\n      loadMarketData();\n    }\n  }, [active, account]);\n  const handleBuy = async nftId => {\n    try {\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n      const listing = await contract.getMarketListing(nftId);\n      const tx = await contract.buyNFT(nftId, {\n        value: listing.price\n      });\n      await tx.wait();\n      alert('购买成功！');\n      loadMarketData();\n    } catch (error) {\n      console.error('Error buying NFT:', error);\n      alert('购买失败: ' + error.message);\n    }\n  };\n  const handleList = async nftId => {\n    try {\n      const price = prompt('请输入上架价格 (BNB):');\n      if (!price) return;\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n\n      // 检查NFT授权\n      const isApproved = await contract.isApprovedForAll(account, MYSTERY_BOX_ADDRESS);\n      if (!isApproved) {\n        const approveTx = await contract.setApprovalForAll(MYSTERY_BOX_ADDRESS, true);\n        await approveTx.wait();\n      }\n      const priceWei = ethers.utils.parseEther(price);\n      const tx = await contract.listNFT(nftId, priceWei);\n      await tx.wait();\n      alert('上架成功！');\n      loadMarketData();\n    } catch (error) {\n      console.error('Error listing NFT:', error);\n      alert('上架失败: ' + error.message);\n    }\n  };\n  const handleDelist = async nftId => {\n    try {\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n      const tx = await contract.unlistNFT(nftId);\n      await tx.wait();\n      alert('下架成功！');\n      loadMarketData();\n    } catch (error) {\n      console.error('Error delisting NFT:', error);\n      alert('下架失败: ' + error.message);\n    }\n  };\n  const handleStake = async nftId => {\n    try {\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n      const tx = await contract.stakeNFT(nftId);\n      await tx.wait();\n      alert('质押成功！');\n      navigate('/mining'); // 直接跳转到挖矿页面\n    } catch (error) {\n      console.error('Error staking NFT:', error);\n      alert('质押失败: ' + error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-[#0B1120] relative overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 grid grid-cols-12 grid-rows-8\",\n          children: [...Array(96)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-[0.5px] border-green-500/5\"\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-gradient-to-b from-green-500/5 via-transparent to-green-500/5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative container mx-auto px-4 py-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative inline-block\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute -inset-2 bg-green-500/20 rounded-lg blur-lg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"relative text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-green-600\",\n            children: \"NFT \\u4EA4\\u6613\\u5E02\\u573A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), !active ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: connectWallet,\n        className: \"w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-3 px-8 rounded-lg hover:from-green-600 hover:to-green-700 transition-all\",\n        children: \"\\u8FDE\\u63A5\\u94B1\\u5305\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-4 border-b border-green-500/20\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `px-4 py-2 ${selectedTab === 'market' ? 'text-green-400 border-b-2 border-green-400' : 'text-gray-400'}`,\n            onClick: () => setSelectedTab('market'),\n            children: \"\\u5E02\\u573A\\u5217\\u8868\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `px-4 py-2 ${selectedTab === 'myNFTs' ? 'text-green-400 border-b-2 border-green-400' : 'text-gray-400'}`,\n            onClick: () => setSelectedTab('myNFTs'),\n            children: \"\\u6211\\u7684NFT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: \"\\u52A0\\u8F7D\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n          children: [selectedTab === 'market' && marketItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-800 p-4 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-400 font-bold\",\n                children: item.type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-400\",\n                children: [\"#\", item.id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: [\"\\u57FA\\u7840\\u7B97\\u529B: \", item.power]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: [\"\\u65E5\\u6536\\u76CA: \", item.dailyReward, \" ZONE\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: [\"\\u6700\\u5927\\u6536\\u76CA: \", item.maxReward, \" ZONE\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: [\"\\u5356\\u5BB6: \", item.seller]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-lg font-bold text-green-400\",\n                children: [item.price, \" BNB\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleBuy(item.id),\n              className: \"w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-2 px-4 rounded-lg hover:from-green-600 hover:to-green-700 transition-all\",\n              children: \"\\u8D2D\\u4E70\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 21\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 19\n          }, this)), selectedTab === 'myNFTs' && myNFTs.map(nft => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-800 p-4 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-400 font-bold\",\n                children: nft.type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-400\",\n                children: [\"#\", nft.id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: [\"\\u57FA\\u7840\\u7B97\\u529B: \", nft.power]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: [\"\\u65E5\\u6536\\u76CA: \", nft.dailyReward, \" ZONE\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: [\"\\u6700\\u5927\\u6536\\u76CA: \", nft.maxReward, \" ZONE\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 23\n              }, this), nft.listed && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-lg font-bold text-green-400\",\n                children: [\"\\u5F53\\u524D\\u4EF7\\u683C: \", nft.price, \" BNB\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleStake(nft.id),\n                className: \"w-full bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:opacity-90 transition-opacity\",\n                children: \"\\u8D28\\u62BC\\u6316\\u77FF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 23\n              }, this), !nft.listed && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleList(nft.id),\n                className: \"w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-2 px-4 rounded-lg hover:from-green-600 hover:to-green-700 transition-all\",\n                children: \"\\u4E0A\\u67B6\\u51FA\\u552E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 25\n              }, this), nft.listed && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelist(nft.id),\n                className: \"w-full bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:opacity-90 transition-opacity\",\n                children: \"\\u4E0B\\u67B6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 21\n            }, this)]\n          }, nft.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n_s(NFTMarket, \"EgYAjc5N3nKF4G6HnYKKQPkTvIE=\", false, function () {\n  return [useWeb3React, useNavigate];\n});\n_c = NFTMarket;\nexport default NFTMarket;\nvar _c;\n$RefreshReg$(_c, \"NFTMarket\");","map":{"version":3,"names":["React","useState","useEffect","useWeb3React","injected","ethers","useNavigate","jsxDEV","_jsxDEV","MYSTERY_BOX_ADDRESS","ZONE_TOKEN_ADDRESS","MYSTERY_BOX_ABI","ZONE_TOKEN_ABI","NFT_RARITY","NFTMarket","_s","active","account","activate","library","navigate","marketItems","setMarketItems","myNFTs","setMyNFTs","selectedTab","setSelectedTab","isLoading","setIsLoading","connectWallet","error","console","loadMarketData","contract","Contract","getSigner","myTokenIds","getOwnedNFTs","myNFTsData","Promise","all","map","tokenId","attributes","getNFTAttributes","listing","getMarketListing","isStaked","id","toString","type","rarity","power","dailyReward","utils","formatEther","maxReward","listed","isActive","price","filter","nft","marketListings","marketItemsData","seller","handleBuy","nftId","tx","buyNFT","value","wait","alert","message","handleList","prompt","isApproved","isApprovedForAll","approveTx","setApprovalForAll","priceWei","parseEther","listNFT","handleDelist","unlistNFT","handleStake","stakeNFT","className","children","Array","_","i","fileName","_jsxFileName","lineNumber","columnNumber","onClick","item","_c","$RefreshReg$"],"sources":["c:/Users/Administrator/CascadeProjects/AIMiner/src/pages/NFTMarket.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { injected } from '../utils/connectors';\nimport { ethers } from 'ethers';\nimport { useNavigate } from 'react-router-dom';\n\n// 合约地址和ABI\nconst MYSTERY_BOX_ADDRESS = \"YOUR_MYSTERY_BOX_CONTRACT_ADDRESS\";\nconst ZONE_TOKEN_ADDRESS = \"YOUR_ZONE_TOKEN_ADDRESS\";\n\nconst MYSTERY_BOX_ABI = [\n  \"function getMarketListing(uint256 tokenId) external view returns (tuple(address seller, uint256 price, bool isActive))\",\n  \"function getNFTAttributes(uint256 tokenId) external view returns (tuple(uint8 rarity, uint256 power, uint256 dailyReward, uint256 maxReward, uint256 minedAmount, bool isStaked, uint256 stakeTime))\",\n  \"function getOwnedNFTs(address user) external view returns (uint256[])\",\n  \"function listNFT(uint256 tokenId, uint256 price) external\",\n  \"function unlistNFT(uint256 tokenId) external\",\n  \"function buyNFT(uint256 tokenId) external payable\",\n  \"function stakeNFT(uint256 tokenId) external\",\n  \"function approve(address to, uint256 tokenId) external\",\n  \"function isApprovedForAll(address owner, address operator) external view returns (bool)\",\n  \"function setApprovalForAll(address operator, bool approved) external\"\n];\n\nconst ZONE_TOKEN_ABI = [\n  \"function balanceOf(address account) external view returns (uint256)\",\n  \"function allowance(address owner, address spender) external view returns (uint256)\",\n  \"function approve(address spender, uint256 amount) external returns (bool)\"\n];\n\nconst NFT_RARITY = ['N', 'R', 'SR', 'SSR'];\n\nconst NFTMarket = () => {\n  const { active, account, activate, library } = useWeb3React();\n  const navigate = useNavigate();\n  const [marketItems, setMarketItems] = useState([]);\n  const [myNFTs, setMyNFTs] = useState([]);\n  const [selectedTab, setSelectedTab] = useState('market');\n  const [isLoading, setIsLoading] = useState(true);\n\n  const connectWallet = async () => {\n    try {\n      await activate(injected);\n    } catch (error) {\n      console.error('Error connecting wallet:', error);\n    }\n  };\n\n  const loadMarketData = async () => {\n    try {\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n      \n      // 加载我的NFT\n      const myTokenIds = await contract.getOwnedNFTs(account);\n      const myNFTsData = await Promise.all(\n        myTokenIds.map(async (tokenId) => {\n          const attributes = await contract.getNFTAttributes(tokenId);\n          const listing = await contract.getMarketListing(tokenId);\n          \n          // 如果已质押，跳过\n          if (attributes.isStaked) return null;\n          \n          return {\n            id: tokenId.toString(),\n            type: NFT_RARITY[attributes.rarity],\n            power: attributes.power.toString(),\n            dailyReward: ethers.utils.formatEther(attributes.dailyReward),\n            maxReward: ethers.utils.formatEther(attributes.maxReward),\n            listed: listing.isActive,\n            price: listing.isActive ? ethers.utils.formatEther(listing.price) : null\n          };\n        })\n      );\n      setMyNFTs(myNFTsData.filter(nft => nft !== null));\n\n      // 加载市场列表\n      // 这里需要一个获取所有市场挂单的方法，暂时使用模拟数据\n      const marketListings = []; // 这里应该从合约获取所有活跃的挂单\n      const marketItemsData = await Promise.all(\n        marketListings.map(async (tokenId) => {\n          const attributes = await contract.getNFTAttributes(tokenId);\n          const listing = await contract.getMarketListing(tokenId);\n          return {\n            id: tokenId.toString(),\n            type: NFT_RARITY[attributes.rarity],\n            power: attributes.power.toString(),\n            dailyReward: ethers.utils.formatEther(attributes.dailyReward),\n            maxReward: ethers.utils.formatEther(attributes.maxReward),\n            price: ethers.utils.formatEther(listing.price),\n            seller: listing.seller\n          };\n        })\n      );\n      setMarketItems(marketItemsData);\n\n      setIsLoading(false);\n    } catch (error) {\n      console.error('Error loading market data:', error);\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (active) {\n      loadMarketData();\n    }\n  }, [active, account]);\n\n  const handleBuy = async (nftId) => {\n    try {\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n      const listing = await contract.getMarketListing(nftId);\n      \n      const tx = await contract.buyNFT(nftId, {\n        value: listing.price\n      });\n      await tx.wait();\n      \n      alert('购买成功！');\n      loadMarketData();\n    } catch (error) {\n      console.error('Error buying NFT:', error);\n      alert('购买失败: ' + error.message);\n    }\n  };\n\n  const handleList = async (nftId) => {\n    try {\n      const price = prompt('请输入上架价格 (BNB):');\n      if (!price) return;\n\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n      \n      // 检查NFT授权\n      const isApproved = await contract.isApprovedForAll(account, MYSTERY_BOX_ADDRESS);\n      if (!isApproved) {\n        const approveTx = await contract.setApprovalForAll(MYSTERY_BOX_ADDRESS, true);\n        await approveTx.wait();\n      }\n\n      const priceWei = ethers.utils.parseEther(price);\n      const tx = await contract.listNFT(nftId, priceWei);\n      await tx.wait();\n      \n      alert('上架成功！');\n      loadMarketData();\n    } catch (error) {\n      console.error('Error listing NFT:', error);\n      alert('上架失败: ' + error.message);\n    }\n  };\n\n  const handleDelist = async (nftId) => {\n    try {\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n      const tx = await contract.unlistNFT(nftId);\n      await tx.wait();\n      \n      alert('下架成功！');\n      loadMarketData();\n    } catch (error) {\n      console.error('Error delisting NFT:', error);\n      alert('下架失败: ' + error.message);\n    }\n  };\n\n  const handleStake = async (nftId) => {\n    try {\n      const contract = new ethers.Contract(MYSTERY_BOX_ADDRESS, MYSTERY_BOX_ABI, library.getSigner());\n      const tx = await contract.stakeNFT(nftId);\n      await tx.wait();\n      \n      alert('质押成功！');\n      navigate('/mining'); // 直接跳转到挖矿页面\n    } catch (error) {\n      console.error('Error staking NFT:', error);\n      alert('质押失败: ' + error.message);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-[#0B1120] relative overflow-hidden\">\n      {/* 背景动画效果 */}\n      <div className=\"absolute inset-0\">\n        {/* 电路背景 */}\n        <div className=\"absolute inset-0\">\n          {/* 网格线 */}\n          <div className=\"absolute inset-0 grid grid-cols-12 grid-rows-8\">\n            {[...Array(96)].map((_, i) => (\n              <div key={i} className=\"border-[0.5px] border-green-500/5\"></div>\n            ))}\n          </div>\n          {/* 渐变背景 */}\n          <div className=\"absolute inset-0 bg-gradient-to-b from-green-500/5 via-transparent to-green-500/5\"></div>\n        </div>\n      </div>\n\n      {/* 主要内容 */}\n      <div className=\"relative container mx-auto px-4 py-8\">\n        <div className=\"text-center mb-12\">\n          <div className=\"relative inline-block\">\n            <div className=\"absolute -inset-2 bg-green-500/20 rounded-lg blur-lg\"></div>\n            <h1 className=\"relative text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-green-600\">\n              NFT 交易市场\n            </h1>\n          </div>\n        </div>\n\n        {!active ? (\n          <button\n            onClick={connectWallet}\n            className=\"w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-3 px-8 rounded-lg hover:from-green-600 hover:to-green-700 transition-all\"\n          >\n            连接钱包\n          </button>\n        ) : (\n          <div className=\"space-y-6\">\n            <div className=\"flex space-x-4 border-b border-green-500/20\">\n              <button\n                className={`px-4 py-2 ${\n                  selectedTab === 'market'\n                    ? 'text-green-400 border-b-2 border-green-400'\n                    : 'text-gray-400'\n                }`}\n                onClick={() => setSelectedTab('market')}\n              >\n                市场列表\n              </button>\n              <button\n                className={`px-4 py-2 ${\n                  selectedTab === 'myNFTs'\n                    ? 'text-green-400 border-b-2 border-green-400'\n                    : 'text-gray-400'\n                }`}\n                onClick={() => setSelectedTab('myNFTs')}\n              >\n                我的NFT\n              </button>\n            </div>\n\n            {isLoading ? (\n              <div className=\"text-center py-8\">加载中...</div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {selectedTab === 'market' && marketItems.map(item => (\n                  <div key={item.id} className=\"bg-gray-800 p-4 rounded-lg\">\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <span className=\"text-green-400 font-bold\">{item.type}</span>\n                      <span className=\"text-sm text-gray-400\">#{item.id}</span>\n                    </div>\n                    <div className=\"space-y-2 mb-4\">\n                      <p className=\"text-sm\">基础算力: {item.power}</p>\n                      <p className=\"text-sm\">日收益: {item.dailyReward} ZONE</p>\n                      <p className=\"text-sm\">最大收益: {item.maxReward} ZONE</p>\n                      <p className=\"text-sm\">卖家: {item.seller}</p>\n                      <p className=\"text-lg font-bold text-green-400\">\n                        {item.price} BNB\n                      </p>\n                    </div>\n                    <button\n                      onClick={() => handleBuy(item.id)}\n                      className=\"w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-2 px-4 rounded-lg hover:from-green-600 hover:to-green-700 transition-all\"\n                    >\n                      购买\n                    </button>\n                  </div>\n                ))}\n\n                {selectedTab === 'myNFTs' && myNFTs.map(nft => (\n                  <div key={nft.id} className=\"bg-gray-800 p-4 rounded-lg\">\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <span className=\"text-green-400 font-bold\">{nft.type}</span>\n                      <span className=\"text-sm text-gray-400\">#{nft.id}</span>\n                    </div>\n                    <div className=\"space-y-2 mb-4\">\n                      <p className=\"text-sm\">基础算力: {nft.power}</p>\n                      <p className=\"text-sm\">日收益: {nft.dailyReward} ZONE</p>\n                      <p className=\"text-sm\">最大收益: {nft.maxReward} ZONE</p>\n                      {nft.listed && (\n                        <p className=\"text-lg font-bold text-green-400\">\n                          当前价格: {nft.price} BNB\n                        </p>\n                      )}\n                    </div>\n                    <div className=\"space-y-2\">\n                      <button\n                        onClick={() => handleStake(nft.id)}\n                        className=\"w-full bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:opacity-90 transition-opacity\"\n                      >\n                        质押挖矿\n                      </button>\n                      {!nft.listed && (\n                        <button\n                          onClick={() => handleList(nft.id)}\n                          className=\"w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-2 px-4 rounded-lg hover:from-green-600 hover:to-green-700 transition-all\"\n                        >\n                          上架出售\n                        </button>\n                      )}\n                      {nft.listed && (\n                        <button\n                          onClick={() => handleDelist(nft.id)}\n                          className=\"w-full bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:opacity-90 transition-opacity\"\n                        >\n                          下架\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NFTMarket;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}